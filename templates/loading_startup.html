<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starting Nexus River View...</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #1a1d20 0%, #0c0e10 100%);
            color: white;
            font-family: 'Outfit', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .loading-card {
            text-align: center;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-width: 400px;
            width: 90%;
        }
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.1);
            border-left-color: #00d2ff;
            border-radius: 50%;
            display: inline-block;
            animation: spin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
            margin-bottom: 1.5rem;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        h2 { font-weight: 700; margin-bottom: 0.5rem; letter-spacing: -0.5px; }
        p { color: rgba(255,255,255,0.6); font-size: 0.9rem; }
        .progress-bar {
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-top: 1.5rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            width: 30%;
            animation: moveProgress 2s ease-in-out infinite;
        }
        @keyframes moveProgress {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300%); }
        }
    </style>
</head>
<body>
    <div class="loading-card">
        <div class="spinner"></div>
        <h2>Nexus River View</h2>
        <p>Initializing Secure Database & Sync Engine</p>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <p style="font-size: 0.7rem; margin-top: 1rem; opacity: 0.4;">Connecting to local server...</p>
    </div>

    <script>
        const url = 'http://127.0.0.1:5000/';
        let attempts = 0;
        
        function checkServer() {
            attempts++;
            console.log("Checking server, attempt " + attempts);
            
            // We use 'no-cors' to avoid preflight issues while the server is still starting
            fetch(url, { mode: 'no-cors', cache: 'no-store' })
                .then(response => {
                    // Even if it's an error status like 404, it means the server is UP
                    console.log("Server responded!");
                    window.location.href = url;
                })
                .catch(error => {
                    // Connection refused or network error
                    const interval = attempts < 10 ? 1000 : 2000;
                    setTimeout(checkServer, interval);
                });
        }
        
        // Start checking after a short delay to give the browser time to render
        setTimeout(checkServer, 1500);
    </script>
</body>
</html>
